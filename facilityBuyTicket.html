<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title></title>
	<link rel="stylesheet" type="text/css" href="css/RESET.css">
	<link rel="stylesheet" type="text/css" href="css/header.css">
	<link rel="stylesheet" type="text/css" href="css/facilityBuyTicket.css">
</head>
<body>
<div class="header">
	<ul class="ul_top">
		<li class="li_top">
			<a href="SignUp.html" id="registerUser">註冊</a>
		</li>
		<li class="li_top">
			<a href="#" id="singUpBtn">登入</a>
		</li>
		<li class="li_top">
			<a href="input_cart.html">購物車</a>
		</li>
	</ul>
</div>
<div class="nav">
	<div class="ul_box">
		<ul class="ul_left">
			<li>
				<a href="Theaterbuyticket.html">劇場購票</a>
			</li>
			<li>
				<a href="facilityBuyTicket.html">設施購票</a>
			</li>
			<li>
				<a href="facilityInfo.html">設施介紹</a>
			</li>
		</ul>
		<h1 style="display: none">FutureAtlas_未來主題樂園</h1>
		<a href="index.html#page1">
			<img src="img/LOGO.png" class="logo">
		</a>
		<ul class="ul_right">
			<li>
				<a href="index.html#page2">園區地圖</a>
			</li>
			<li>
				<a href="activity.html">活動月曆</a>
			</li>
			<li>
				<a href="robot.html">諮詢專區</a>
			</li>
		</ul>
	</div>
	<div class="navOpenBtn"><!-- RWD left btn-->
		<div class="ham"></div>
		<div class="ham"></div>
		<div class="ham"></div>
		<div class="ham"></div>
	</div>
</div>
<div class="headerOpenBtn"><!-- RWD right btn-->
	<img src="img/Usericon1.png" class="memIcon">
	<img src="img/Usericon.png" class="memIcon">
	
</div>

	<!-- header end-->
	<!-- header end-->
<div class="fbtWrapper">
	<!-- /////01-->
	<div class="ticketbox">
		<div class="ticketTitlebox">
			<div class="ticket">
				<figure class="front">
					<img src="img/facilityBuyTicket/launched-rocket.png" class="icon">
				</figure>
				<figure class="back">1</figure>
			</div>
			<h2 class="ticketTitle">宇宙雲霄飛車</h2>
		</div>

	
		<div class="f_img">
			<img src="img/facilityBuyTicket/p_01.jpg"><span class="cover"></span>
		</div>
		<div class="shortInfo">
			史上最快最高的宇宙雲霄飛車
		</div>

		<div class="adult" data-val="190">
			<span>全票</span><span class="price">190元/1張</span>
			<div class='ctrl'>
				 <div class='ctrl-button ctrl-button-decrement'>-</div>
					  <div class='ctrl-counter'>
					  	<input class='ctrl-counter-input' id="ad_count" maxlength='3' type='text' value='0' data-no="0" onkeyup="this.value=this.value.replace(/[^0-9]/g,'')">
					  </div>
					  <div class='ctrl-button ctrl-button-increment'>+</div>
				</div>
		</div>

		<div class="child" data-val="90">
			<span>半票</span><span class="price">90元/1張</span>
			<div class='ctrl'>
				 <div class='ctrl-button ctrl-button-decrement'>-</div>
					  <div class='ctrl-counter'>
					  	<input class='ctrl-counter-input' id="ch_count" maxlength='3' type='text' value='0' data-no="1" onkeyup="this.value=this.value.replace(/[^0-9]/g,'')">	
					  </div>
					<div class='ctrl-button ctrl-button-increment'>+</div>
				</div>
		</div>
		<div class="f_submit" data-fn="1">
			加入購物車
		</div>
	</div>
	<!-- /////02-->
		<div class="ticketbox">
		<div class="ticketTitlebox">
			<div class="ticket">
				<figure class="front">
					<img src="img/facilityBuyTicket/launched-rocket.png" class="icon">
				</figure>
				<figure class="back">2</figure>
			</div>
			<h2 class="ticketTitle">FA摩天輪</h2>
		</div>

	
		<div class="f_img">
			<img src="img/facilityBuyTicket/p_01.jpg"><span class="cover"></span>
		</div>
		<div class="shortInfo">
			高空一覽未來的樣貌
		</div>

		<div class="adult" data-val="185">
			<span>全票</span><span class="price">185元/1張</span>
			<div class='ctrl'>
				 <div class='ctrl-button ctrl-button-decrement'>-</div>
					  <div class='ctrl-counter'>
					  	<input class='ctrl-counter-input' id="ad_count" maxlength='3' type='text' value='0' data-no="2">
					  </div>
					  <div class='ctrl-button ctrl-button-increment'>+</div>
				</div>
			</div>

		<div class="child" data-val="100">
			<span>半票</span><span class="price">100元/1張</span>
			<div class='ctrl'>
				 <div class='ctrl-button ctrl-button-decrement'>-</div>
					  <div class='ctrl-counter'>
					  	<input class='ctrl-counter-input' id="ch_count" maxlength='3' type='text' value='0' data-no="3">	
					  </div>
					<div class='ctrl-button ctrl-button-increment'>+</div>
				</div>
		</div>
		<div class="f_submit" data-fn="2">
			加入購物車
		</div>
	</div>
	<!-- /////03-->
		<div class="ticketbox">
		<div class="ticketTitlebox">
			<div class="ticket">
				<figure class="front">
					<img src="img/facilityBuyTicket/launched-rocket.png" class="icon">
				</figure>
				<figure class="back">3</figure>
			</div>
			<h2 class="ticketTitle">宇宙雲霄飛車</h2>
		</div>

	
		<div class="f_img">
			<img src="img/facilityBuyTicket/p_01.jpg"><span class="cover"></span>
		</div>
		<div class="shortInfo">
			史上最快最高的宇宙雲霄飛車
		</div>

		<div class="adult" data-val="200">
			<span>全票</span><span class="price">200元/1張</span>
			<div class='ctrl'>
				 <div class='ctrl-button ctrl-button-decrement'>-</div>
					  <div class='ctrl-counter'>
					  	<input class='ctrl-counter-input' id="ad_count" maxlength='3' type='text' value='0' data-no="4">
					  </div>
					  <div class='ctrl-button ctrl-button-increment'>+</div>
				</div>
			</div>

		<div class="child" data-val="95">
			<span>半票</span><span class="price">95元/1張</span>
			<div class='ctrl'>
				 <div class='ctrl-button ctrl-button-decrement'>-</div>
					  <div class='ctrl-counter'>
					  	<input class='ctrl-counter-input' id="ch_count" maxlength='3' type='text' value='0' data-no="5">	
					  </div>
					<div class='ctrl-button ctrl-button-increment'>+</div>
				</div>
		</div>
		<div class="f_submit" data-fn="3">
			加入購物車
		</div>
	</div>
	<!-- /////04-->
	<div class="ticketbox">
		<div class="ticketTitlebox">
			<div class="ticket">
				<figure class="front">
					<img src="img/facilityBuyTicket/launched-rocket.png" class="icon">
				</figure>
				<figure class="back">4</figure>
			</div>
			<h2 class="ticketTitle">宇宙雲霄飛車</h2>
		</div>

	
		<div class="f_img">
			<img src="img/facilityBuyTicket/p_01.jpg"><span class="cover"></span>
		</div>
		<div class="shortInfo">
			史上最快最高的宇宙雲霄飛車
		</div>

		<div class="adult" data-val="160">
			<span>全票</span><span class="price">160元/1張</span>
			<div class='ctrl'>
				 <div class='ctrl-button ctrl-button-decrement'>-</div>
					  <div class='ctrl-counter'>
					  	<input class='ctrl-counter-input' id="ad_count" maxlength='3' type='text' value='0' data-no="6">
					  </div>
					  <div class='ctrl-button ctrl-button-increment'>+</div>
				</div>
			</div>

		<div class="child" data-val="75">
			<span>半票</span><span class="price">75元/1張</span>
			<div class='ctrl'>
				 <div class='ctrl-button ctrl-button-decrement'>-</div>
					  <div class='ctrl-counter'>
					  	<input class='ctrl-counter-input' id="ch_count" maxlength='3' type='text' value='0' data-no="7">	
					  </div>
					<div class='ctrl-button ctrl-button-increment'>+</div>
				</div>
		</div>
		<div class="f_submit" data-fn="4">
			加入購物車
		</div>
	</div>
	<!-- /////5-->
		<div class="ticketbox">
		<div class="ticketTitlebox">
			<div class="ticket">
				<figure class="front">
					<img src="img/facilityBuyTicket/launched-rocket.png" class="icon">
				</figure>
				<figure class="back">5</figure>
			</div>
			<h2 class="ticketTitle">宇宙雲霄飛車</h2>
		</div>

	
		<div class="f_img">
			<img src="img/facilityBuyTicket/p_01.jpg"><span class="cover"></span>
		</div>
		<div class="shortInfo">
			史上最快最高的宇宙雲霄飛車
		</div>

		<div class="adult" data-val="160">
			<span>全票</span><span class="price">160元/1張</span>
			<div class='ctrl'>
				 <div class='ctrl-button ctrl-button-decrement'>-</div>
					  <div class='ctrl-counter'>
					  	<input class='ctrl-counter-input' id="ad_count" maxlength='3' type='text' value='0' data-no="8">
					  </div>
					  <div class='ctrl-button ctrl-button-increment'>+</div>
				</div>
			</div>

		<div class="child" data-val="80">
			<span>半票</span><span class="price">80元/1張</span>
			<div class='ctrl'>
				 <div class='ctrl-button ctrl-button-decrement'>-</div>
					  <div class='ctrl-counter'>
					  	<input class='ctrl-counter-input' id="ch_count" maxlength='3' type='text' value='0' data-no="9">	
					  </div>
					<div class='ctrl-button ctrl-button-increment'>+</div>
				</div>
		</div>
		<div class="f_submit" data-fn="5">
			加入購物車
		</div>
	</div>
	<!-- /////06-->
			<div class="ticketbox">
		<div class="ticketTitlebox">
			<div class="ticket">
				<figure class="front">
					<img src="img/facilityBuyTicket/launched-rocket.png" class="icon">
				</figure>
				<figure class="back">6</figure>
			</div>
			<h2 class="ticketTitle">宇宙雲霄飛車</h2>
		</div>

	
		<div class="f_img">
			<img src="img/facilityBuyTicket/p_01.jpg"><span class="cover"></span>
		</div>
		<div class="shortInfo">
			史上最快最高的宇宙雲霄飛車
		</div>

		<div class="adult" data-val="290">
			<span>全票</span><span class="price">290元/1張</span>
			<div class='ctrl'>
				 <div class='ctrl-button ctrl-button-decrement'>-</div>
					  <div class='ctrl-counter'>
					  	<input class='ctrl-counter-input' id="ad_count" maxlength='3' type='text' value='0' data-no="10">
					  </div>
					  <div class='ctrl-button ctrl-button-increment'>+</div>
			</div>
		</div>

		<div class="child" data-val="110">
			<span>半票</span><span class="price">110元/1張</span>
			<div class='ctrl'>
				<div class='ctrl-button ctrl-button-decrement'>-</div>
					  <div class='ctrl-counter'>
					  	<input class='ctrl-counter-input' id="ch_count" maxlength='3' type='text' value='0' data-no="11">	
					  </div>
				<div class='ctrl-button ctrl-button-increment'>+</div>
			</div>
		</div>
		<div class="f_submit" data-fn="6">
			加入購物車
		</div>
	</div>
	<!-- /////-->
</div>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="js/00nav.js"></script>
<script type="text/javascript">
function init(){
	//-INPUT NUMBER
	var decrement = document.querySelectorAll('.ctrl-button-decrement');
	var container = document.querySelectorAll('.ctrl-counter');
	var input = document.querySelectorAll('.ctrl-counter-input');
	var increment = document.querySelectorAll('.ctrl-button-increment');
	var val = [];
	
		for(var i = 0; i<input.length;i++ ){
			decrement[i].addEventListener('click',decrementA);
			increment[i].addEventListener('click',incrementA);
			input[i].addEventListener("change",typeMode);
		}

	//減
	function decrementA(){
		var a = this.nextElementSibling.children[0].dataset.no;//抓到第幾個input的data-id
			val[a] = input[a].value;
			if(val[a]>0){
				val[a] = parseInt(val[a] -1);
				input[a].value = val[a];
				
			}else{
				val[a] = 0;
			}
	}
	//加
	function incrementA(){
		var b = this.previousElementSibling.children[0].dataset.no;
			val[b] = input[b].value;
			if(val[b]<99){
				val[b]++;
				input[b].value = val[b];

			}else{
				val[b] = 99;
			}
		
		}
	//change時
	function typeMode(){
		var val = this.value;
		if(val>99){
			this.value = 99;
		}else if(val<0){
			this.value = 0;
		}
	}
}


	function l_storage(){
	 	facility_ticket_list="";
		var f_submit = document.querySelectorAll('.f_submit');
		for(var i =0; i<f_submit.length;i++){
			f_submit[i].addEventListener('click',saveToStorage);
		}

	function saveToStorage(){
		var storage = localStorage;
		var fn = this.dataset.fn;/*設施編號*/
		var ad = this.previousElementSibling.previousElementSibling.children[2].children[1].children[0].value;/*全票張數*/
		var adp = this.previousElementSibling.previousElementSibling.dataset.val;/*全票價格*/
		var cd = this.previousElementSibling.children[2].children[1].children[0].value;/*半票張數*/
		var cdp = this.previousElementSibling.dataset.val;/*半票價格*/
		var addToCart = adp+"/"+ad+"/"+cdp+"/"+cd;
		if(ad!=0||cd!=0){//判斷全票半票皆不為0張
			storage.setItem(fn,addToCart);
			console.log(facility_ticket_list.indexOf(fn));
				if(facility_ticket_list.indexOf(fn)==-1){
					facility_ticket_list += fn+"/" ;
					storage.setItem("facility_ticket_list", facility_ticket_list);   
				}
				
		}
	}
}
window.addEventListener('load',init);
window.addEventListener('load',l_storage);
</script>
</html>